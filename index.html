<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 ISC ëŒ€ë§Œ ì—¬í–‰</title>

  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/desktop.css" media="(min-width: 768px)">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width: 767px)">
</head>
<body>

<header class="header" id="topHeader" style="display:none;">
  <img src="assets/images/logo.png" class="logo">
  <div class="header-text">
    <h1>2025 ISC ëŒ€ë§Œ ì—¬í–‰</h1>
    <p class="sub">2026.03.11 ~ 03.14 | ì¸ì¹´ê¸ˆìœµì„œë¹„ìŠ¤</p>
  </div>
</header>

<!-- ë¡œê·¸ì¸ -->
<section id="loginSection" class="login-hero">
  <div class="hero-overlay">
    <div class="login-box">
      <img src="assets/images/logo.png" class="hero-logo">
      <h2>2025 ISC Taiwan</h2>
      <p class="hero-desc">ì‚¬ë²ˆìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”</p>
      <input type="text" id="employeeId" placeholder="ì‚¬ë²ˆ ì…ë ¥">
      <button class="primary-btn" onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginError" class="error"></p>
    </div>
  </div>
</section>

<!-- ë©”ì¸ -->
<main id="mainSection" style="display:none;">
  <p class="welcome"><strong id="employeeName"></strong> ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤</p>

  <div class="menu">
    <button onclick="openPage('schedule')">ğŸ—“ ì—¬í–‰ ì¼ì •</button>
    <button onclick="openPage('flight')">âœˆï¸ í•­ê³µí¸ ì •ë³´</button>
    <button onclick="openPage('taiwan')">ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ</button>
    <button onclick="openPage('myTour')">ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘</button>
    <button onclick="openPage('dinner')">ğŸ½ ë§Œì°¬ ì•ˆë‚´</button>
    <button onclick="openPage('request')">ğŸ“ ìš”ì²­ì‚¬í•­</button>
    <button onclick="openPage('contact')">ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</button>
  </div>
</main>

<!-- ìƒì„¸ -->
<section id="detailPage" class="detail" style="display:none;">
  <h2 id="detailTitle"></h2>
  <div id="detailContent"></div>

  <div class="nav-buttons">
    <button class="ghost-btn" onclick="goHome()">í™ˆìœ¼ë¡œ</button>
    <button class="ghost-btn" onclick="goBack()">ë’¤ë¡œê°€ê¸°</button>
  </div>
</section>

<script>
let employees = [];
let currentUser = null;
let pageStack = [];

fetch("people/employees.json?ts=" + Date.now())
  .then(res => res.json())
  .then(data => employees = data);

function login() {
  const id = document.getElementById("employeeId").value.trim();
  const user = employees.find(e => e.id === id);
  if (!user) {
    document.getElementById("loginError").textContent = "ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.";
    return;
  }
  currentUser = user;
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("topHeader").style.display = "flex";
  document.getElementById("mainSection").style.display = "block";
  document.getElementById("employeeName").textContent = user.name;
}

function openPage(type) {
  pageStack.push(type);
  document.getElementById("mainSection").style.display = "none";
  const detail = document.getElementById("detailPage");
  detail.style.display = "block";
  detail.classList.remove("animate-in");
  void detail.offsetWidth;
  detail.classList.add("animate-in");

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  if (type === "taiwan") {
    t.textContent = "ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ";
    c.innerHTML = `
      <div class="card">
        <h3>ê¸°ë³¸ ì •ë³´</h3>
        <ul class="list">
          <li><strong>ìˆ˜ë„:</strong> íƒ€ì´ë² ì´</li>
          <li><strong>ì–¸ì–´:</strong> ì¤‘êµ­ì–´(ë²ˆì²´), íƒ€ì´ì™„ì–´</li>
          <li><strong>í™”í:</strong> ì‹  íƒ€ì´ì™„ ë‹¬ëŸ¬ (TWD)</li>
          <li><strong>ì‹œì°¨:</strong> í•œêµ­ë³´ë‹¤ 1ì‹œê°„ ëŠë¦¼</li>
        </ul>

        <h3>í•œêµ­ê³¼ ë¹„êµ</h3>
        <ul class="list">
          <li>ì „ì••: ëŒ€ë§Œ 110V / í•œêµ­ 220V</li>
          <li>ì½˜ì„¼íŠ¸: Aí˜• (ë³€í™˜ ì–´ëŒ‘í„° í•„ìš”)</li>
          <li>ë¹„í–‰ì‹œê°„: ì•½ 2ì‹œê°„ 30ë¶„</li>
        </ul>

        <h3>ì—¬í–‰ íŒ</h3>
        <p class="muted">
          ì¹˜ì•ˆì´ ë¹„êµì  ì•ˆì •ì ì´ë©°, ëŒ€ì¤‘êµí†µì´ ë§¤ìš° ë°œë‹¬í•´ ìˆìŠµë‹ˆë‹¤.
          ìŒì‹ì€ ëŒ€ì²´ë¡œ í•œêµ­ì¸ ì…ë§›ì— ì˜ ë§ìŠµë‹ˆë‹¤.
        </p>
      </div>
    `;
  }

  if (type === "flight") {
    t.textContent = "âœˆï¸ í•­ê³µí¸ ì •ë³´";
    c.innerHTML = `<div class="card"><p>${currentUser.flight}</p></div>`;
  }

  if (type === "myTour") {
    t.textContent = "ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘";
    if (!currentUser.myTour || currentUser.myTour.length === 0) {
      c.innerHTML = "<div class='card'><p>ì„ íƒí•œ ê´€ê´‘ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>";
    } else {
      c.innerHTML = `
        <div class="card">
          <ul class="mytour-list">
            ${currentUser.myTour.map(t => `<li>${t}</li>`).join("")}
          </ul>
        </div>
      `;
    }
  }

  if (type === "schedule") {
    t.textContent = "ğŸ—“ ì—¬í–‰ ì¼ì •";
    c.innerHTML = "<div class='card'><p>ê³µì‹ ì¼ì •í‘œ ê¸°ì¤€ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì˜ˆì •</p></div>";
  }

  if (type === "dinner") {
    t.textContent = "ğŸ½ ë§Œì°¬ ì•ˆë‚´";
    c.innerHTML = "<div class='card'><p>í•„ìˆ˜ ì°¸ì„ í–‰ì‚¬ì…ë‹ˆë‹¤.</p></div>";
  }

  if (type === "request") {
    t.textContent = "ğŸ“ ìš”ì²­ì‚¬í•­";
    c.innerHTML = `
      <div class="card">
        <textarea id="requestText" placeholder="ìš”ì²­ì‚¬í•­ ì…ë ¥"></textarea>
        <button class="primary-btn" onclick="submitRequest()">ì œì¶œ</button>
        <p id="submitMessage"></p>
      </div>
    `;
  }

  if (type === "contact") {
    t.textContent = "ğŸ“ ê¸´ê¸‰ ì—°ë½ë§";
    c.innerHTML = "<div class='card'><p>í˜„ì§€ ë‹´ë‹¹ì ì •ë³´ ì¶”í›„ ì œê³µ</p></div>";
  }
}

function submitRequest() {
  document.getElementById("submitMessage").textContent = "ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.";
}

function goHome() {
  pageStack = [];
  document.getElementById("detailPage").style.display = "none";
  document.getElementById("mainSection").style.display = "block";
}

function goBack() {
  goHome();
}
</script>

</body>
</html>
