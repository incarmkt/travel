/* =================================================
   MOBILE.CSS – SINGLE WORKING VERSION
   (HTML 수정 없이: detail-header + detailContent 구조 기준)
================================================= */

/* 0) 모바일에서 스크롤 계산을 안정화 */
html, body {
  height: 100%;
}

/* ================= BASIC ================= */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, "Noto Sans KR", sans-serif;
  background: #f6f7fb;
}

/* 로그인 이후 배경 */
body.logged-in {
  background: url("../assets/images/main-bg.jpg")
              center / cover no-repeat fixed;
}

/* =================================================
   MOBILE HEADER (상단바 고정 – 너가 만족한 버전 유지)
================================================= */
@media (max-width: 767px) {

  body.logged-in .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;

    height: 60px;
    padding: 8px 12px;

    display: flex;
    align-items: center;
    justify-content: space-between;

    background: #fff;
    z-index: 1000;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .header img.logo {
    width: 44px;
    flex-shrink: 0;
  }

  .header h1 {
    font-size: 14px;
    margin: 0;
    line-height: 1.2;
    white-space: nowrap;
  }

  .header .sub { display: none; }

  .header-right {
    text-align: right;
    font-size: 11px;
    line-height: 1.3;
    white-space: nowrap;
  }

  .header-right .welcome-text {
    font-size: 12px;
    font-weight: 600;
  }

  /* 메인 영역은 헤더만큼 내려감 */
  #mainSection {
    padding-top: 60px;
  }
}

/* =================================================
   CATEGORY (카테고리 화면)
================================================= */
@media (max-width: 767px) {

  /* 모바일에서는 데스크탑 레이아웃/고정값들 무력화 */
  #mainSection,
  .layout,
  .content-area,
  .main-panel {
    height: auto !important;
    overflow: visible !important;
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
  }

  /* 카테고리 */
  .side-menu {
    display: block;
    padding: 24px 20px;
    margin-top: 12px;
  }

  .side-menu button {
    width: 100%;
    margin-bottom: 14px;
    padding: 16px;

    border-radius: 14px;
    border: none;

    font-size: 16px;
    font-weight: 600;

    background: #1f5fbf;
    color: #fff;
  }
}

/* =================================================
   DETAIL (모바일: 고정 패널 + 상단 고정(제목+버튼) + 내용만 스크롤)
   ✅ HTML/JS 수정 없음 (현재 index.html 구조 그대로 대응)
================================================= */
@media (max-width: 767px) {

  /* ✅ 모바일에서 바깥(body) 스크롤 잠금 (대신 내부 패널만 스크롤) */
  body {
    overflow: hidden;
    overscroll-behavior: none;
  }

  /* detailPage 기본은 숨김 (JS가 display:block 줄 때만 보임) */
  #detailPage {
    display: none;
  }

  /* ✅ JS가 display:block을 주는 순간 → 고정 패널 + GRID 레이아웃 */
  #detailPage[style*="display: block"] {
    position: fixed;
    top: 60px;      /* 모바일 헤더 높이 */
    left: 16px;
    right: 16px;
    bottom: 16px;

    /* ✅ 핵심: 제목(h2) + 버튼(nav-buttons)을 1행에 고정 배치 */
    display: grid;
    grid-template-columns: 1fr auto;
    grid-template-rows: auto 1fr;

    background: rgba(255,255,255,0.92);
    border-radius: 18px;

    overflow: hidden; /* 패널 자체는 고정, 내부(#detailContent)만 스크롤 */
    z-index: 900;

    /* 패널 안쪽 여백은 각 영역에서 처리 */
    padding: 0;
  }

  /* ✅ 데스크탑용 .detail 박스(두겹 원인) 무력화 */
  .detail {
    max-width: none !important;
    height: auto !important;
    padding: 0 !important;
    border-radius: 0 !important;
    background: transparent !important;
    overflow: visible !important;
  }

  /* ====== 1행(고정): 제목 ====== */
  #detailPage[style*="display: block"] > h2#detailTitle {
    grid-column: 1 / 2;
    grid-row: 1 / 2;

    margin: 0;
    padding: 12px 14px;

    font-size: 16px;
    font-weight: 800;
    line-height: 1.2;

    background: #fff;
    border-bottom: 1px solid #e5e7eb;

    /* 줄바꿈/넘침 방지 */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* ====== 1행(고정): 버튼 ====== */
  #detailPage[style*="display: block"] > .nav-buttons {
    grid-column: 2 / 3;
    grid-row: 1 / 2;

    display: flex;
    gap: 8px;

    padding: 10px 12px 10px 0;
    background: #fff;
    border-bottom: 1px solid #e5e7eb;

    align-items: center;
    justify-content: flex-end;
  }

  #detailPage[style*="display: block"] > .nav-buttons .ghost-btn {
    padding: 6px 10px;
    font-size: 13px;
    border-radius: 10px;
  }

  /* ====== 2행(스크롤): 내용 ====== */
  #detailPage[style*="display: block"] > #detailContent {
    grid-column: 1 / 3;
    grid-row: 2 / 3;

    /* ✅ 여기만 스크롤 */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    /* ✅ flex/grid 스크롤 필수 */
    min-height: 0;

    padding: 16px 14px;

    /* 터치 스크롤 보장 */
    touch-action: pan-y;
  }

  /* 모바일에서 불필요 영역 숨김 */
  .home-view,
  .fixed-poster {
    display: none !important;
  }
}


/* =================================================
   MOBILE SPLASH
================================================= */
.mobile-splash {
  position: fixed;
  inset: 0;
  background: #000;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.mobile-splash img {
  max-width: 80%;
  max-height: 80%;
  object-fit: contain;
}
