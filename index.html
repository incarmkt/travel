<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 ISC ëŒ€ë§Œ ì—¬í–‰</title>

  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/desktop.css" media="(min-width: 768px)">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width: 767px)">
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="header" id="topHeader" style="display:none;">
  <img src="assets/images/logo.png" class="logo">
  <div>
    <h1>2025 ISC ëŒ€ë§Œ ì—¬í–‰</h1>
    <p class="sub">2026.03.11 ~ 03.14 | ì¸ì¹´ê¸ˆìœµì„œë¹„ìŠ¤</p>
  </div>
</header>

<!-- ===== LOGIN ===== -->
<section id="loginSection" class="login-hero">
  <div class="hero-overlay">
    <div class="login-box">
      <img src="assets/images/logo.png" class="hero-logo">
      <h2>2025 ISC Taiwan</h2>
      <p class="hero-desc">ì‚¬ë²ˆìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”</p>

      <input type="text" id="employeeId" placeholder="ì‚¬ë²ˆ ì…ë ¥">
      <button class="primary-btn" onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginError" class="error"></p>
    </div>
  </div>
</section>

<!-- ===== MAIN ===== -->
<main id="mainSection" style="display:none;">
  <p class="welcome"><strong id="employeeName"></strong> ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤</p>

  <div class="menu">
    <button onclick="openPage('schedule')">ğŸ—“ ì—¬í–‰ ì¼ì •</button>
    <button onclick="openPage('flight')">âœˆï¸ í•­ê³µí¸ ì •ë³´</button>
    <button onclick="openPage('taiwan')">ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ</button>
    <button onclick="openPage('myTour')">ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘</button>
    <button onclick="openPage('dinner')">ğŸ½ ë§Œì°¬ ì•ˆë‚´</button>
    <button onclick="openPage('request')">ğŸ“ ìš”ì²­ì‚¬í•­</button>
    <button onclick="openPage('contact')">ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</button>
  </div>
</main>

<!-- ===== DETAIL ===== -->
<section id="detailPage" class="detail" style="display:none;">
  <h2 id="detailTitle"></h2>
  <div id="detailContent"></div>

  <div class="nav-buttons">
    <button class="ghost-btn" onclick="goHome()">í™ˆìœ¼ë¡œ</button>
    <button class="ghost-btn" onclick="goBack()">ë’¤ë¡œê°€ê¸°</button>
  </div>
</section>

<script>
/* ================== ë°ì´í„° ================== */
let employees = [];
let currentUser = null;
let pageStack = [];

/* === ì—¬í–‰ ì¼ì • ë°ì´í„° === */
const travelSchedule = [
  {
    day: "DAY 1",
    date: "2026.03.11 (ìˆ˜)",
    title: "ì¸ì²œ â†’ íƒ€ì´ë² ì´ / ì‹œë‚´ ê´€ê´‘",
    timeline: [
      { time: "08:00", text: "ì¸ì²œ ì¶œë°œ" },
      { time: "12:30", text: "ì¤‘ì‹" },
      { time: "14:00", text: "ì¤‘ì •ê¸°ë…ë‹¹", spot: "ì¤‘ì •ê¸°ë…ë‹¹" },
      { time: "16:00", text: "ê³ ê¶ë°•ë¬¼ê´€", spot: "ê³ ê¶ë°•ë¬¼ê´€" }
    ]
  },
  {
    day: "DAY 2",
    date: "2026.03.12 (ëª©)",
    title: "ì„ íƒ ê´€ê´‘ / ë§Œì°¬",
    timeline: [
      { time: "09:00", text: "ì„ íƒ ê´€ê´‘" },
      { time: "18:00", text: "ISC ë§Œì°¬" }
    ]
  },
  {
    day: "DAY 3",
    date: "2026.03.13 (ê¸ˆ)",
    title: "ê·¼êµ ê´€ê´‘",
    timeline: [
      { time: "10:00", text: "ì•¼ë¥˜", spot: "ì•¼ë¥˜" },
      { time: "14:00", text: "ì§€ìš°í€", spot: "ì§€ìš°í€" }
    ]
  },
  {
    day: "DAY 4",
    date: "2026.03.14 (í† )",
    title: "ê·€êµ­",
    timeline: [
      { time: "07:00", text: "ì²´í¬ì•„ì›ƒ" },
      { time: "11:40", text: "íƒ€ì´ë² ì´ ì¶œë°œ" }
    ]
  }
];

/* === ê´€ê´‘ì§€ ì •ë³´ === */
const spotInfo = {
  "ì¤‘ì •ê¸°ë…ë‹¹": {
    img: "assets/images/spot_chiang.jpg",
    desc: "ëŒ€ë§Œ ì´ˆëŒ€ ì´í†µ ì¥ì œìŠ¤ë¥¼ ê¸°ë¦¬ëŠ” ê¸°ë…ê´€"
  },
  "ê³ ê¶ë°•ë¬¼ê´€": {
    img: "assets/images/spot_museum.jpg",
    desc: "ì¤‘êµ­ í™©ì‹¤ ìœ ë¬¼ì„ ì†Œì¥í•œ ì„¸ê³„ì  ë°•ë¬¼ê´€"
  },
  "ì•¼ë¥˜": {
    img: "assets/images/spot_yeliu.jpg",
    desc: "ê¸°ì•”ê´´ì„ í•´ì•ˆ êµ­ë¦½ê³µì›"
  },
  "ì§€ìš°í€": {
    img: "assets/images/spot_jiufen.jpg",
    desc: "í™ë“±ê³¼ ê³¨ëª©ì´ ìœ ëª…í•œ ì‚°ê°„ ë§ˆì„"
  }
};

/* ================== ë¡œì§ ================== */
fetch("people/employees.json?ts=" + Date.now())
  .then(res => res.json())
  .then(data => employees = data);

function login() {
  const id = document.getElementById("employeeId").value.trim();
  const user = employees.find(e => e.id === id);
  if (!user) {
    document.getElementById("loginError").textContent = "ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.";
    return;
  }
  currentUser = user;
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("topHeader").style.display = "flex";
  document.getElementById("mainSection").style.display = "block";
  document.getElementById("employeeName").textContent = user.name;
}

function openPage(type) {
  pageStack.push(type);
  document.getElementById("mainSection").style.display = "none";
  const d = document.getElementById("detailPage");
  d.style.display = "block";
  d.classList.remove("animate-in");
  void d.offsetWidth;
  d.classList.add("animate-in");

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  if (type === "schedule") {
    t.textContent = "ğŸ—“ ì—¬í–‰ ì¼ì •";
    c.innerHTML = travelSchedule.map(day => `
      <div class="day-card">
        <h3>${day.day} <span>${day.date}</span></h3>
        <p class="day-title">${day.title}</p>
        <ul class="timeline">
          ${day.timeline.map(i => `
            <li>
              <span class="time">${i.time}</span>
              ${
                i.spot
                ? `<button class="spot-btn" onclick="openSpot('${i.spot}')">${i.text}</button>`
                : `<span>${i.text}</span>`
              }
            </li>
          `).join("")}
        </ul>
      </div>
    `).join("");
  }

  if (type === "flight") {
    t.textContent = "âœˆï¸ í•­ê³µí¸ ì •ë³´";
    c.innerHTML = `<div class="card">${currentUser.flight}</div>`;
  }

  if (type === "taiwan") {
    t.textContent = "ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ";
    c.innerHTML = `
      <div class="card">
        <ul class="list">
          <li>ìˆ˜ë„: íƒ€ì´ë² ì´</li>
          <li>ì–¸ì–´: ì¤‘êµ­ì–´(ë²ˆì²´)</li>
          <li>ì‹œì°¨: í•œêµ­ -1ì‹œê°„</li>
          <li>í™”í: TWD</li>
        </ul>
      </div>`;
  }

  if (type === "myTour") {
    t.textContent = "ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘";
    c.innerHTML = `
      <div class="card">
        <ul class="mytour-list">
          ${(currentUser.myTour || []).map(t => `<li>${t}</li>`).join("")}
        </ul>
      </div>`;
  }

  if (type === "dinner") {
    t.textContent = "ğŸ½ ë§Œì°¬ ì•ˆë‚´";
    c.innerHTML = `<div class="card">í•„ìˆ˜ ì°¸ì„ í–‰ì‚¬</div>`;
  }

  if (type === "request") {
    t.textContent = "ğŸ“ ìš”ì²­ì‚¬í•­";
    c.innerHTML = `
      <div class="card">
        <textarea placeholder="ìš”ì²­ì‚¬í•­ ì…ë ¥"></textarea>
        <button class="primary-btn">ì œì¶œ</button>
      </div>`;
  }

  if (type === "contact") {
    t.textContent = "ğŸ“ ê¸´ê¸‰ ì—°ë½ë§";
    c.innerHTML = `<div class="card">í˜„ì§€ ë‹´ë‹¹ì ì •ë³´</div>`;
  }
}

function openSpot(name) {
  const s = spotInfo[name];
  document.getElementById("detailTitle").textContent = name;
  document.getElementById("detailContent").innerHTML = `
    <div class="card">
      <img src="${s.img}" class="spot-img">
      <p>${s.desc}</p>
    </div>`;
}

function goHome() {
  document.getElementById("detailPage").style.display = "none";
  document.getElementById("mainSection").style.display = "block";
}

function goBack() { goHome(); }
</script>

</body>
</html>
