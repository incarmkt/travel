<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 ISC ëŒ€ë§Œ ì—¬í–‰</title>

  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/desktop.css" media="(min-width: 768px)">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width: 767px)">
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="header compact" id="topHeader" style="display:none;">
  <div class="header-left">
    <img src="assets/images/logo.png" class="logo">
    <div>
      <h1>2025 ISC ëŒ€ë§Œ ì—¬í–‰</h1>
      <p class="sub">2026.03.11 ~ 03.14 | ì¸ì¹´ê¸ˆìœµì„œë¹„ìŠ¤</p>
    </div>
  </div>

  <div class="header-right">
    <p class="congrats">ISC ë‹¬ì„±ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤.</p>
    <p class="welcome-text"><strong id="employeeName"></strong> ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤</p>
  </div>
</header>

<!-- ================= LOGIN (FINAL / DO NOT TOUCH) ================= -->
<section id="loginSection" class="login-hero">
  <div class="hero-overlay">
    <div class="login-box">
      <img src="assets/images/logo.png" class="hero-logo">
      <h2>2025 ISC Taiwan</h2>
      <p class="hero-desc">ì‚¬ë²ˆìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”</p>

      <input type="text" id="employeeId" placeholder="ì‚¬ë²ˆ ì…ë ¥">
      <button class="primary-btn" onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginError" class="error"></p>
    </div>
  </div>
</section>

<!-- ================= MAIN (LOGIN AFTER) ================= -->
<main id="mainSection" class="main-bg" style="display:none;">

  <div class="layout">

    <!-- ===== LEFT MENU ===== -->
    <aside class="side-menu">
      <button onclick="openPage('schedule')">ğŸ—“ ì—¬í–‰ ì¼ì •</button>
      <button onclick="openPage('flight')">âœˆï¸ í•­ê³µí¸ ì •ë³´</button>
      <button onclick="openPage('taiwan')">ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ</button>
      <button onclick="openPage('myTour')">ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘</button>
      <button onclick="openPage('dinner')">ğŸ½ ë§Œì°¬ ì•ˆë‚´</button>
      <button onclick="openPage('request')">ğŸ“ ìš”ì²­ì‚¬í•­</button>
      <button onclick="openPage('contact')">ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</button>
    </aside>

    <!-- ===== RIGHT CONTENT ===== -->
    <section class="content-area">

  <!-- ğŸ”´ ë©”ì¸ íŒ¨ë„ (RED) -->
  <div class="main-panel">

    <!-- í™ˆì¼ ë•Œ -->
    <div id="homeArea" class="home-view">
      <img src="assets/images/home.jpg" alt="Home Image">
    </div>

    <!-- ìƒì„¸ í˜ì´ì§€ -->
    <section id="detailPage" class="detail" style="display:none;">
      <h2 id="detailTitle"></h2>
      <div id="detailContent"></div>

      <div class="nav-buttons">
        <button class="ghost-btn" onclick="goHome()">í™ˆìœ¼ë¡œ</button>
        <button class="ghost-btn" onclick="goBack()">ë’¤ë¡œê°€ê¸°</button>
      </div>
    </section>

  </div>

  <!-- ğŸŸ¨ ê³ ì • í¬ìŠ¤í„° íŒ¨ë„ (YELLOW) -->
  <aside class="fixed-poster">
    <img src="assets/images/iscposter.jpg" alt="Fixed Poster">
  </aside>

</section>


<script>
/* ================= ê³µí†µ ================= */
let employees = [];
let currentUser = null;

fetch("people/employees.json?ts=" + Date.now())
  .then(res => res.json())
  .then(data => employees = data);

function login() {
  const id = document.getElementById("employeeId").value.trim();
  const user = employees.find(e => e.id === id);

  if (!user) {
    document.getElementById("loginError").textContent = "ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.";
    return;
  }

  currentUser = user;

  document.getElementById("loginSection").style.display = "none";
  document.getElementById("topHeader").style.display = "flex";
  document.getElementById("mainSection").style.display = "block";
  document.getElementById("employeeName").textContent = user.name;

  document.body.classList.add("logged-in");
}

/* ================= ì—¬í–‰ ì¼ì • ================= */
const travelSchedule = [
  {
    day: "DAY 1",
    date: "2026.03.11 (ìˆ˜)",
    title: "ì¸ì²œ â†’ íƒ€ì´ë² ì´ / ì‹œë‚´ í•˜ì´ë¼ì´íŠ¸",
    items: [
      { time:"08:00", icon:"âœˆï¸", title:"ì¸ì²œ êµ­ì œê³µí•­ ì¶œë°œ", desc:"OZ 711 / KE 2021" },
      { time:"12:30", icon:"ğŸœ", title:"ì¤‘ì‹ | ìš°ìœ¡ë©´", desc:"í˜„ì§€ ì¸ê¸° ì¤‘ì‹ë‹¹" },
      { time:"14:00", icon:"ğŸ›ï¸", title:"ì¤‘ì •ê¸°ë…ë‹¹", desc:"ì¥ê°œì„ ì´í†µ ê¸°ë…ê´€" },
      { time:"15:30", icon:"ğŸº", title:"êµ­ë¦½ê³ ê¶ë°•ë¬¼ê´€", desc:"ì„¸ê³„ 4ëŒ€ ë°•ë¬¼ê´€" },
      { time:"18:30", icon:"ğŸ½ï¸", title:"ì„ì‹ | íƒ€ì¹´ì˜¤ ìƒ¤ë¸Œìƒ¤ë¸Œ", desc:"í˜„ì§€ì‹" },
      { time:"20:00", icon:"ğŸŒƒ", title:"íƒ€ì´ë² ì´ 101 ì „ë§ëŒ€", desc:"ì•¼ê²½ ê´€ëŒ" }
    ]
  },
  {
    day: "DAY 2",
    date: "2026.03.12 (ëª©)",
    title: "ì„ íƒ ê´€ê´‘ / ë§Œì°¬",
    items: [
      { time:"09:00", icon:"ğŸšŒ", title:"ì„ íƒ ê´€ê´‘", desc:"ê°œì¸ ì„ íƒ ì¼ì •" },
      { time:"18:00", icon:"ğŸ‰", title:"ISC ë§Œì°¬", desc:"í•„ìˆ˜ ì°¸ì„" }
    ]
  },
  {
    day: "DAY 3",
    date: "2026.03.13 (ê¸ˆ)",
    title: "ê·¼êµ ê´€ê´‘",
    items: [
      { time:"10:00", icon:"ğŸŒŠ", title:"ì•¼ë¥˜ í•´ìƒê³µì›", desc:"ê¸°ì•”ê´´ì„ ê´€ê´‘" },
      { time:"14:00", icon:"ğŸ®", title:"ì§€ìš°í€", desc:"í™ë“± ë§ˆì„" }
    ]
  },
  {
    day: "DAY 4",
    date: "2026.03.14 (í† )",
    title: "ê·€êµ­",
    items: [
      { time:"07:00", icon:"ğŸ¨", title:"í˜¸í…” ì²´í¬ì•„ì›ƒ", desc:"" },
      { time:"11:40", icon:"âœˆï¸", title:"íƒ€ì´ë² ì´ ì¶œë°œ", desc:"OZ 712 / KE 2022" },
      { time:"15:25", icon:"ğŸ‡°ğŸ‡·", title:"ì¸ì²œ ë„ì°©", desc:"" }
    ]
  }
];

/* ================= í˜ì´ì§€ ì—´ê¸° ================= */
function openPage(type) {
  // ğŸ”´ í™ˆ í™”ë©´ ìˆ¨ê¸°ê³ 
  document.getElementById("homeArea").style.display = "none";

  // ğŸ”´ ìƒì„¸ í˜ì´ì§€ í‘œì‹œ
  document.getElementById("detailPage").style.display = "block";

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  if (type === "schedule") {
    t.textContent = "ğŸ—“ ì—¬í–‰ ì¼ì •";
    c.innerHTML = travelSchedule.map(day => `
      <div class="day-card">
        <h3>${day.day} <span>${day.date}</span></h3>
        <p class="day-title">${day.title}</p>

        <div class="timeline">
          ${day.items.map(i => `
            <div class="schedule-item">
              <div class="timeline-dot"></div>
              <div class="schedule-card">
                <div class="schedule-time">${i.time}</div>
                <div class="schedule-body">
                  <div class="schedule-title">${i.icon} ${i.title}</div>
                  ${i.desc ? `<div class="schedule-desc">${i.desc}</div>` : ""}
                </div>
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `).join("");
  }

if (type === "flight") {
  const dep = currentUser.flight.departure;
  const ret = currentUser.flight.return;

  t.textContent = "âœˆï¸ í•­ê³µí¸ ì •ë³´";
  c.innerHTML = `
    <div class="day-card">
      <h3>ì¶œêµ­í¸</h3>
      <div class="schedule-item">
        <div class="schedule-card">
          <div class="schedule-time">${dep.time}</div>
          <div class="schedule-body">
            <div class="schedule-title">âœˆï¸ ${dep.from} â†’ ${dep.to}</div>
            <div class="schedule-desc">${dep.airline} ${dep.flightNo}</div>
            <div class="schedule-desc">${dep.date}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="day-card">
      <h3>ê·€êµ­í¸</h3>
      <div class="schedule-item">
        <div class="schedule-card">
          <div class="schedule-time">${ret.time}</div>
          <div class="schedule-body">
            <div class="schedule-title">ğŸ  ${ret.from} â†’ ${ret.to}</div>
            <div class="schedule-desc">${ret.airline} ${ret.flightNo}</div>
            <div class="schedule-desc">${ret.date}</div>
          </div>
        </div>
      </div>
    </div>
  `;
}


  if (type === "myTour") {
    t.textContent = "ğŸ’ ë‚˜ì˜ ì„ íƒ ê´€ê´‘";
    c.innerHTML = `<div class="card"><ul class="mytour-list">
      ${(currentUser.myTour || []).map(x => `<li>${x}</li>`).join("")}
    </ul></div>`;
  }

  if (type === "taiwan") {
    t.textContent = "ğŸ‡¹ğŸ‡¼ ëŒ€ë§Œì˜ ëª¨ë“  ê²ƒ";
    c.innerHTML = `<div class="card">ëŒ€ë§Œ ê¸°ë³¸ ì •ë³´ ì•ˆë‚´</div>`;
  }

  if (type === "dinner") {
    t.textContent = "ğŸ½ ë§Œì°¬ ì•ˆë‚´";
    c.innerHTML = `<div class="card">ISC ê³µì‹ ë§Œì°¬</div>`;
  }

  if (type === "request") {
  t.textContent = "ğŸ“ ìš”ì²­ì‚¬í•­";
  c.innerHTML = `<div class="card">
    <textarea id="requestInput" placeholder="ìš”ì²­ì‚¬í•­ ì…ë ¥"></textarea>
    <button class="primary-btn" onclick="submitRequest()">ì œì¶œ</button>
  </div>`;
}
  
 if (type === "contact") {
  t.textContent = "ğŸ“ ê¸´ê¸‰ ì—°ë½ë§";

  c.innerHTML = `
    <div class="day-card">
      <h3>ë¹„ìƒ ì—°ë½ë§</h3>

      <div class="timeline">
        <!-- ì¸ì¹´ë¸”ë£¨íˆ¬ì–´ -->
        <div class="schedule-item">
          <div class="timeline-dot"></div>
          <div class="schedule-card">
            <div class="schedule-body">
              <div class="schedule-title">ğŸ“ ì¸ì¹´ë¸”ë£¨íˆ¬ì–´</div>
              <div class="schedule-desc">
                ë‹´ë‹¹ì í™ê¸¸ë™ | 010-0000-0000
              </div>
            </div>
          </div>
        </div>

        <!-- ì¸ì¹´ ë§ˆì¼€íŒ…ë¶€ -->
        <div class="schedule-item">
          <div class="timeline-dot"></div>
          <div class="schedule-card">
            <div class="schedule-body">
              <div class="schedule-title">ğŸ“ ì¸ì¹´ ë§ˆì¼€íŒ…ë¶€</div>
              <div class="schedule-desc">
                ë‹´ë‹¹ì í˜„ë³´ë¼ê³¼ì¥ | 02-6214-0000
              </div>
            </div>
          </div>
        </div>

        <!-- í˜„ì§€ ê°€ì´ë“œ -->
        <div class="schedule-item">
          <div class="timeline-dot"></div>
          <div class="schedule-card">
            <div class="schedule-body">
              <div class="schedule-title">ğŸ“ í˜„ì§€ ê°€ì´ë“œ</div>
              <div class="schedule-desc">
                ë‹´ë‹¹ì Jason | +886-900-222-222
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  `;
}


/* ================= í™ˆìœ¼ë¡œ ================= */
function goHome() {
  // ğŸ”´ ìƒì„¸ í˜ì´ì§€ ìˆ¨ê¸°ê³ 
  document.getElementById("detailPage").style.display = "none";

  // ğŸ”´ í™ˆ í™”ë©´ ë³µê·€
  document.getElementById("homeArea").style.display = "block";
}

function goBack(){ 
  goHome(); 
}
  /* ================= ìš”ì²­ì‚¬í•­ ì „ì†¡ (ì—¬ê¸°ì— ì¶”ê°€) ================= */
function submitRequest() {
  const requestText = document.getElementById("requestInput").value.trim();

  if (!requestText) {
    alert("ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  if (!currentUser) {
    alert("ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  fetch("https://script.google.com/macros/s/AKfycbw-YzxhfrISbRZ06D4--rQ-xCd4j1YC45CZ3yYXyXZupTCpfTLTJhoYKjICDDrOTNHBdw/exec", {
   method: "POST",
  mode: "no-cors",
  body: JSON.stringify({
    id: currentUser.id,
    name: currentUser.name,
    request: requestText
  })
})
.then(() => {
  alert("ìš”ì²­ì‚¬í•­ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‹œíŠ¸ ë°˜ì˜ì€ ì ì‹œ í›„ í™•ì¸)");
  document.getElementById("requestInput").value = "";
})
.catch(err => {
  console.error(err);
  alert("ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
});
}
</script>


</body>
</html>
