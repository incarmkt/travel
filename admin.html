<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ISC ê´€ë¦¬ì</title>

  <!-- âœ… ê³ ê°ìš©ê³¼ ë™ì¼ CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/desktop.css" media="(min-width:768px)">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width:767px)">



  <style>
      /* ğŸ”¥ ëª¨ë°”ì¼ í„°ì¹˜ ì°¨ë‹¨ ë¬¸ì œ í•´ê²° */
@media (max-width: 767px) {
  .detail, 
  .home-view {
    pointer-events: auto !important;
  }

  .detail * {
    pointer-events: auto !important;
  }
}
    /* ===============================
       ê´€ë¦¬ì ì¶”ê°€ CSS (ê¸°ì¡´ CSS í›¼ì† ì—†ì´ ìµœì†Œ)
       =============================== */

    /* QR ëª¨ë“œì¼ ë•Œë§Œ ìŠ¤í¬ë¡¤ ì ê¸ˆ */
    body.qr-lock{
      overflow:hidden !important;
      overscroll-behavior:none;
    }

    /* âœ… ê´€ë¦¬ì í™ˆ(ëª¨ë°”ì¼ì—ì„œ 3ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ì´ ì¤‘ì•™ì— ì˜ˆì˜ê²Œ ë³´ì´ë„ë¡) */
    .admin-home-card{
      max-width:520px;
      margin:0 auto;
      text-align:center;
    }
    .admin-home-card .admin-home-buttons{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:14px;
    }

    /* âœ… ì„œë¸Œ ë²„íŠ¼(ì „ì²´/ì„ íƒ ë“±) */
    .admin-sub-buttons{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top:12px;
    }

    /* âœ… ì¼ì •/í•­ëª© í´ë¦­ ê°€ëŠ¥í•œ ì¹´ë“œ */
    .admin-clickable{ cursor:pointer; user-select:none; }

    /* ===============================
       QR í™”ë©´ : í•œ í™”ë©´ ê³ ì • (ìŠ¤í¬ë¡¤ ì œê±°)
       - ì–´ë–¤ ê¸°ì¢…ì—ì„œë„ ì¹´ë©”ë¼+ì…ë ¥+ê²°ê³¼ê°€ í•œ í™”ë©´
       =============================== */

    /* QR ëª¨ë“œì¼ ë•Œ detailPageë¥¼ ê³ ì • ë ˆì´ì•„ì›ƒìœ¼ë¡œ */
    body.qr-lock #detailPage{
      height: 100dvh;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }

    /* ì œëª© ì œì™¸í•œ ë‚´ìš© ì˜ì—­ */
    body.qr-lock #detailContent{
      flex:1;
      display:flex;
      justify-content:center;
      align-items:stretch;
      overflow:hidden;
      padding-bottom:12px;
      box-sizing:border-box;
    }

    /* QR ì „ì²´ íŒ¨ë„ */
    .qr-panel{
      width:100%;
      max-width:520px;
      display:flex;
      flex-direction:column;
      gap:10px;
      padding: 0 12px;
      box-sizing:border-box;
    }

    /* ì¹´ë©”ë¼ ì˜ì—­ */
    #qrReader{
      width:100%;
      background:#000;
      border-radius:12px;
      overflow:hidden;
      flex: 1;
      max-height: 42dvh; /* âœ… í•µì‹¬: ì…ë ¥/ê²°ê³¼ê¹Œì§€ í•œ í™”ë©´ì— ë“¤ì–´ì˜¤ê²Œ */
    }

    #qrReader video, #qrReader canvas{
      width:100% !important;
      height:100% !important;
      object-fit:cover;
    }

    /* ìˆ˜ê¸° ì…ë ¥ ì¤„ */
    .manual-row{
      display:flex;
      gap:10px;
      width:100%;
    }
    .manual-row input{
      flex:1;
      padding:12px;
      border-radius:12px;
      border:1px solid #d0d5dd;
      background:#fff;
      box-sizing:border-box;
    }

    /* ê²°ê³¼ì°½ */
    .qr-result{
      width:100%;
      padding:12px;
      border-radius:12px;
      background:#f8fafc;
      border:1px solid #e5e7eb;
      text-align:center;
      font-size:14px;
      line-height:1.4;
      min-height:44px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-sizing:border-box;
    }
    .qr-result.success{ color:#16a34a; font-weight:800; }
    .qr-result.fail{
  color:#d97706;          /* ë…¸ë€ ê³„ì—´ */
  background:#fffbeb;
  border-color:#fde68a;
  font-weight:800;
}
  

    /* ê³ ê° ìƒì„¸ ì¹´ë“œ */
    .info-card{
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:12px;
      margin: 10px 0;
    }
    .info-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:8px;
    }
    .info-row{ font-size:14px; color:#111827; }
    .info-label{ color:#6b7280; font-size:12px; margin-bottom:2px; }
    .pill{
      display:inline-block;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      font-size:12px;
    }
    .qr-customer-like{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

.qr-camera{
  width:100%;
  max-width:420px;
  aspect-ratio:1/1;
  border-radius:16px;
  overflow:hidden;
  background:#000;
}

.qr-toast{
  margin-top:12px;
  padding:10px 14px;
  border-radius:999px;
  font-size:14px;
  font-weight:700;
  background:#111;
  color:#fff;
}

.qr-toast.success{
  background:#16a34a;
}

.qr-toast.fail{
  background:#f59e0b;
  color:#111;
}
.qr-counter{
  margin-top:8px;
  font-size:14px;
  font-weight:700;
  color:#111827;
}
    body.qr-lock .nav-buttons{
  position: sticky;
  bottom: 0;
  background: #fff;
  padding-bottom: env(safe-area-inset-bottom);
  z-index: 20;
}
  </style>
</head>

<body>

<!-- ================= ê´€ë¦¬ì ë¡œê·¸ì¸ ================= -->
<section id="adminLoginSection" class="login-hero">
  <div class="hero-overlay">
    <div class="login-box">
      <img src="assets/images/logo.png" class="hero-logo">
      <h2>ISC ê´€ë¦¬ì</h2>
      <p class="hero-desc">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</p>

      <input type="password" id="adminPwInput" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸">
      <button class="primary-btn" onclick="adminDoLogin()">ë¡œê·¸ì¸</button>
      <p id="adminLoginError" class="error"></p>
    </div>
  </div>
</section>

<!-- ================= HEADER (ê³ ê°ìš© êµ¬ì¡° ê·¸ëŒ€ë¡œ) ================= -->
<header class="header compact" id="topHeader" style="display:none;">
  <div class="header-left">
    <img src="assets/images/logo.png" class="logo">
    <div>
      <h1>ISC ê´€ë¦¬ì</h1>
      <p class="sub">ê´€ë¦¬ì ëª¨ë“œ</p>
    </div>
  </div>
  <div class="header-right">
    <p class="welcome-text"><strong>ê´€ë¦¬ì</strong>ë‹˜</p>
  </div>
</header>

<!-- ================= MAIN (ê³ ê°ìš© êµ¬ì¡° ê·¸ëŒ€ë¡œ) ================= -->
<main id="mainSection" class="main-bg" style="display:none;">
  <div class="layout">

    <!-- âœ… ì¢Œì¸¡ ë©”ë‰´(ê³ ê°ìš©ê³¼ ë™ì¼ UX) -->
    <aside class="side-menu">
      <button onclick="openPage('travelRoot')">ğŸ§­ ì—¬í–‰ì¼ì •ê´€ë¦¬</button>
      <button onclick="openPage('mealRoot')">ğŸ’³ ì¤‘ì‹ë¹„ì§€ê¸‰ê´€ë¦¬</button>
      <button onclick="openPage('customerRoot')">ğŸ‘¤ ê³ ê°ê´€ë¦¬</button>
      <button onclick="openPage('reportRoot')">ğŸ“Š ê´€ë¦¬ì ìš”ì•½ ë¦¬í¬íŠ¸</button>
    </aside>

    <section class="content-area">
      <div class="main-panel">

        <div id="homeArea" class="home-view" style="display:none;">
  <div class="card" style="padding:0; overflow:hidden;">
    <img
      src="assets/images/home.jpg"
      alt="ISC ê´€ë¦¬ì í™ˆ"
      style="
        width:100%;
        height:auto;
        display:block;
        border-radius:12px;
      "
    />
  </div>
</div>
        
        <!-- ìƒì„¸ í˜ì´ì§€(ê³ ê°ìš©ê³¼ ë™ì¼) -->
        <section id="detailPage" class="detail" style="display:none;">
          <h2 id="detailTitle"></h2>
          <div id="detailContent"></div>

          <div class="nav-buttons">
            <button class="ghost-btn" onclick="openHome()">í™ˆìœ¼ë¡œ</button>
            <button class="ghost-btn" onclick="goBack()">ë’¤ë¡œê°€ê¸°</button>
          </div>
        </section>

      </div>

      <!-- âœ… ìš°ì¸¡ ê³ ì • í¬ìŠ¤í„°(ê³ ê°ìš©ê³¼ ë™ì¼ êµ¬ì¡°) -->
      <aside class="fixed-poster">
        <img src="assets/images/iscposter.jpg" alt="Fixed Poster">
      </aside>
    </section>
  </div>
</main>

<!-- QR ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://unpkg.com/html5-qrcode"></script>

<script>
/* =========================================================
   âœ… ì„¤ì • (ê³ ê°ìš©ê³¼ ê´€ë¦¬ììš© ë¹„ë°€ë²ˆí˜¸ â€œë™ì¼â€ ìœ ì§€)
   - ë„¤ ìš”êµ¬: ê³ ê°ìš© HTMLì—ì„œ ì“°ëŠ” ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ì™€ ë™ì¼í•´ì•¼ í•¨
========================================================= */
const ADMIN_PASSWORD = "0000";  // âœ… ê³ ê°ìš©ê³¼ ë™ì¼ ê°’ ìœ ì§€
const GAS_URL = "https://script.google.com/macros/s/AKfycbxiHY2_E0cVRlh1A45s5ilaYEwq10mqnp5qxvaFr_KZVE6Uzk72B24zlt_agXsO7NvD7A/exec";
const EMP_URL = "people/employees.json?ts=" + Date.now();

/* =========================================================
   âœ… ê³µí†µ ìƒíƒœ
========================================================= */
let employees = [];
let qrScanner = null;

let deviceCount = 0;        // â‘  ë‹¨ë§ê¸°(ì„¸ì…˜) ì¹´ìš´íŠ¸
let qrSessionKey = "";      // QR í™”ë©´ ë‹¨ìœ„ë¡œ ì¹´ìš´íŠ¸ ì €ì¥ í‚¤
  
/* QR ëª¨ë“œ: departure | meal | customer */
let qrMode = "";
/* ìŠ¤ìº” ì»¨í…ìŠ¤íŠ¸ */
let currentCategory = "";   // ì „ì²´ì¼ì •ê´€ë¦¬ | ì„ íƒì¼ì •ê´€ë¦¬
let currentCourse = "";     // ì¼ì • í•­ëª©ëª…(ì˜ˆ: ì¤‘ì‹ | ìš°ìœ¡ë©´)
let currentMealTitle = "";  // ì¤‘ì‹ë¹„ í•­ëª©ëª…(ì˜ˆ: ë‹¨ìˆ˜ì´)


/* ì—°ì† ìŠ¤ìº” ì¤‘ë³µ ë°©ì§€ */
let lastScanKey = "";
let scanLock = false; // ğŸ”¥ ì¶”ê°€
  // âœ… ì„¸ì…˜ ë‹¨ìœ„ ì¤‘ë³µ ë°©ì§€ (ë‚˜ê°”ë‹¤ ì™€ë„ ìœ ì§€)
const sessionScans = JSON.parse(
  sessionStorage.getItem("isc_scans") || "{}"
);

  
// ğŸ”¥ QR ì¢…ë£Œ ì‹œ ëŒì•„ê°ˆ ê´€ë¦¬ì í˜ì´ì§€
  let currentView = ""; 
// home | travelRoot | travelList | travelQR | mealRoot | mealQR | customer | report
  
/* =========================================================
   âœ… ì§ì› ë°ì´í„° ë¡œë“œ
========================================================= */
fetch(EMP_URL)
  .then(r => r.json())
  .then(d => employees = d)
  .catch(console.error);

/* =========================================================
   âœ… ê´€ë¦¬ì ë¡œê·¸ì¸
========================================================= */
function adminDoLogin(){
  const pw = String(document.getElementById("adminPwInput").value || "").trim();
  if (pw !== ADMIN_PASSWORD){
    document.getElementById("adminLoginError").textContent = "ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜";
    return;
  }
document.getElementById("adminLoginError").textContent = "";
  
  document.getElementById("adminLoginSection").style.display = "none";
  document.getElementById("topHeader").style.display = "flex";
  document.getElementById("mainSection").style.display = "block";
  document.body.classList.add("logged-in");

  /* âœ… ë¡œê·¸ì¸ í›„ â€œê´€ë¦¬ì í™ˆ(3ì¹´í…Œê³ ë¦¬)â€ê°€ ë¨¼ì € ë– ì•¼ í•¨ */
  openHome();
}

/* =========================================================
   âœ… í™ˆ: ëª¨ë°”ì¼ì—ì„œë„ 3ê°œ ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ì´ ë³´ì—¬ì•¼ í•¨
========================================================= */
function openHome(){
  cleanupQR();
  currentView = "home";
  
  document.getElementById("detailPage").style.display = "none";
  document.getElementById("homeArea").style.display = "block";

  /* ëª¨ë°”ì¼ì¼ ë•Œ ì‚¬ì´ë“œ ë©”ë‰´ë„ ë³´ì´ê²Œ(ê³ ê°ìš© UXì™€ ë™ì¼) */
  if (window.innerWidth <= 767){
    document.querySelector(".side-menu").style.display = "block";
  }
}

/* =========================================================
   âœ… í˜ì´ì§€ ì—´ê¸°
========================================================= */
function openPage(type, fromHistory=false){
  cleanupQR();

  document.getElementById("homeArea").style.display = "none";
  document.getElementById("detailPage").style.display = "block";

  /* ëª¨ë°”ì¼ì¼ ë•Œ: detail ì§„ì…í•˜ë©´ ë©”ë‰´ ìˆ¨ê¹€ (ê³ ê°ìš© ë°©ì‹ ìœ ì§€) */
  if (window.innerWidth <= 767){
    document.querySelector(".side-menu").style.display = "none";
  }
    // ğŸ”¥ ê´€ë¦¬ì ë£¨íŠ¸ í˜ì´ì§€ ê¸°ì–µ
  if (type === "reportRoot") {
     currentView = "report"; 
  openAdminReport();
  return;
}

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  /* =============================
     1) ì—¬í–‰ì¼ì •ê´€ë¦¬ (ë£¨íŠ¸)
     ============================= */
  if (type === "travelRoot"){
    currentView = "travelRoot";
    t.textContent = "ğŸ§­ ì—¬í–‰ì¼ì •ê´€ë¦¬";
    c.innerHTML = `
      <div class="card" style="text-align:center;">
        <p style="margin:0; font-weight:800;">ì¶œë°œ ì²´í¬ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
        <div class="admin-sub-buttons">
          <button class="primary-btn" onclick="openTravelList('ì „ì²´ì¼ì •ê´€ë¦¬')">ì „ì²´ì¼ì •ê´€ë¦¬</button>
          <button class="primary-btn" onclick="openTravelList('ì„ íƒì¼ì •ê´€ë¦¬')">ì„ íƒì¼ì •ê´€ë¦¬</button>
        </div>
        <p style="margin:10px 0 0; color:#667085; font-size:12px;">
          â€» ì¼ì • ì„ íƒ â†’ QR í™”ë©´ì—ì„œ ë°”ì½”ë“œì²˜ëŸ¼ <b>ì—°ì† ìŠ¤ìº”</b>í•˜ë©´ ìë™ ê¸°ë¡ë©ë‹ˆë‹¤.
        </p>
      </div>
    `;
    return;
  }

  /* =============================
     2) ì¤‘ì‹ë¹„ì§€ê¸‰ê´€ë¦¬ (ë£¨íŠ¸)
     - ê³ ê°ìš©ê³¼ ì–‘ì‹ í†µì¼: type:"meal", action:"APPROVE"
     - ê³ ê°ìš© í˜ì´ì§€ì—ì„œ ìƒíƒœ ë™ê¸°í™”í•  ë•Œë„ ì´ ë¡œê·¸ë¥¼ ì”€
     ============================= */
  if (type === "mealRoot"){
     currentView = "mealRoot";
    t.textContent = "ğŸ’³ ì¤‘ì‹ë¹„ì§€ê¸‰ê´€ë¦¬";
    c.innerHTML = `
      <div class="card" style="text-align:center;">
        <p style="margin:0; font-weight:800;">ì§€ê¸‰ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”</p>
        <div class="admin-sub-buttons">
          ${MEAL_ITEMS.map(x => `
            <button class="primary-btn" onclick="openMealQR('${escapeQuotes(x.title)}')">${escapeHtml(x.title)}</button>
          `).join("")}
        </div>
        <p style="margin:10px 0 0; color:#667085; font-size:12px;">
          â€» QR/ì‚¬ë²ˆ ìŠ¤ìº” ì‹œ GASì— <span class="pill">type: meal</span> / <span class="pill">action: APPROVE</span> ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
        </p>
      </div>
    `;
    return;
  }

  /* =============================
     3) ê³ ê°ê´€ë¦¬
     - ì—¬ê¸°ì„œë§Œ â€œìŠ¤ìº” í›„ ìƒì„¸ì •ë³´ ì£¼ë¥´ë¥µâ€
     ============================= */
  if (type === "customerRoot"){
    openCustomerScan(); /* ë°”ë¡œ QR í™”ë©´ */
    return;
  }

  /* fallback */
  openHome();
}

/* =========================================================
   âœ… ì—¬í–‰ì¼ì •ê´€ë¦¬: ì¹´í…Œê³ ë¦¬ ì„ íƒ í›„ ì¼ì • ë¦¬ìŠ¤íŠ¸
========================================================= */
function openTravelList(cat){
   currentView = "travelList";
  currentCategory = cat; // âœ… ì¤‘ìš”

  const myTourTemplates = [
    { keyword: "í‹°ì—”ë¼ì´", label: "ì„ íƒ 1ì•ˆ | í‹°ì—”ë¼ì´ ì˜¨ì²œ íë§" },
    { keyword: "ê³ ê¶ë°•ë¬¼ê´€", label: "ì„ íƒ 2ì•ˆ | ê³ ê¶ë°•ë¬¼ê´€ ì—­ì‚¬ ê¸°í–‰" },
    { keyword: "ììœ ì¼ì •", label: "ì„ íƒ 3ì•ˆ | ììœ ì¼ì •" }
  ];

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  t.textContent = `ğŸ—“ ${cat}`;

  const source = (cat === "ì „ì²´ì¼ì •ê´€ë¦¬")
    ? travelSchedule
    : travelSchedule.filter(day => (day.title || "").includes("ì„ íƒ"));

  c.innerHTML = source.map(day => `
    <div class="day-card">
      <h3>${escapeHtml(day.day)} <span>${escapeHtml(day.date)}</span></h3>
      <p class="day-title">${escapeHtml(day.title)}</p>

      <div class="timeline">
        ${day.items.map(item => {

          /* âœ… ì„ íƒ ê´€ê´‘ ë¶„í•´ */
          if (cat === "ì„ íƒì¼ì •ê´€ë¦¬" && item.title === "ì„ íƒ ê´€ê´‘") {
            return myTourTemplates.map(tour => `
              <div class="schedule-item">
                <div class="timeline-dot"></div>
                <div class="schedule-card admin-clickable"
                     onclick="openDepartureQR('${tour.keyword}')">
                  <div class="schedule-time">${escapeHtml(item.time || "")}</div>
                  <div class="schedule-title">ğŸ§­ ${escapeHtml(tour.label)}</div>
                  <div class="schedule-desc">ì„ íƒ ê´€ê´‘ ì„¸ë¶€ ì¼ì •</div>
                </div>
              </div>
            `).join("");
          }

          /* âœ… ê¸°ì¡´ ì¼ì • ìœ ì§€ */
          return `
            <div class="schedule-item">
              <div class="timeline-dot"></div>
              <div class="schedule-card admin-clickable"
                   onclick="openDepartureQR('${escapeQuotes(item.title)}')">
                <div class="schedule-time">${escapeHtml(item.time || "")}</div>
                <div class="schedule-title">${escapeHtml(item.icon || "")} ${escapeHtml(item.title || "")}</div>
                ${item.desc ? `<div class="schedule-desc">${escapeHtml(item.desc)}</div>` : ""}
              </div>
            </div>
          `;
        }).join("")}
      </div>
    </div>
  `).join("");
}


/* =========================================================
   âœ… ì—¬í–‰ ì¶œë°œ ì²´í¬ QR í™”ë©´ (ì—°ì† ìŠ¤ìº”)
========================================================= */
function openDepartureQR(courseTitle){
   currentView = "travelQR";
  currentCourse = courseTitle;
  qrMode = "departure";
  lastScannedEmployee = null;
  lastScanKey = "";

  openQRScreen(`ğŸ“· ì¶œë°œ ì²´í¬ - ${courseTitle}`, {
    showReset: true
  });
   // âœ… [ì—¬ê¸° ì¶”ê°€] QR í™”ë©´ ì—´ë¦´ ë•Œ í˜„ì¬ ì¸ì› ì¡°íšŒ
  fetch(`${GAS_URL}?mode=countDeparture&category=${encodeURIComponent(currentCategory)}&course=${encodeURIComponent(currentCourse)}`)
    .then(r => r.json())
    .then(d => {
      const counterEl = document.getElementById("qrCounter");
      if (counterEl) {
        counterEl.textContent = `í˜„ì¬ ì²˜ë¦¬ ì¸ì›: ${d.totalCount}ëª…`;
      }
    });
}

/* =========================================================
   âœ… ì¤‘ì‹ë¹„ QR í™”ë©´ (ì—°ì† ìŠ¤ìº”)
   - ê³ ê°ìš©ê³¼ ì–‘ì‹ í†µì¼: type:"meal", tour, action, time
========================================================= */
function openMealQR(mealTitle){
  currentView = "mealQR";
  currentMealTitle = mealTitle;
  qrMode = "meal";
  lastScannedEmployee = null;
  lastScanKey = "";

  openQRScreen(`ğŸ“· ì¤‘ì‹ë¹„ ì§€ê¸‰ - ${mealTitle}`, {
    showReset: true
  });
    // âœ… [ì—¬ê¸° ì¶”ê°€] ì¤‘ì‹ë¹„ í˜„ì¬ ì§€ê¸‰ ì¸ì› ì¡°íšŒ
  fetch(`${GAS_URL}?mode=countMeal&tour=${encodeURIComponent(currentMealTitle)}`)
    .then(r => r.json())
    .then(d => {
      const counterEl = document.getElementById("qrCounter");
      if (counterEl) {
        counterEl.textContent = `í˜„ì¬ ì²˜ë¦¬ ì¸ì›: ${d.totalCount}ëª…`;
      }
    });
}

/* =========================================================
   âœ… ê³ ê°ê´€ë¦¬ QR (ì¡°íšŒ í›„ ìƒì„¸ ì¶œë ¥)
========================================================= */
function openCustomerScan(){
   currentView = "customer";
  qrMode = "customer";
  lastScannedEmployee = null;
  lastScanKey = "";

  openQRScreen(`ğŸ“· ê³ ê° ì¡°íšŒ`, {
    showReset: false
  });
}

/* =========================================================
   âœ… ê³µí†µ QR í™”ë©´ ë Œë”ë§
   - QR + ì‚¬ë²ˆ ì…ë ¥ + ê²°ê³¼ + ì´ˆê¸°í™” ë²„íŠ¼
   - ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ì—†ì´ í•œ í™”ë©´ ê³ ì •
   - ê³ ê°ìš© QR ë ˆì´ì•„ì›ƒê³¼ ë™ì¼
========================================================= */
function openQRScreen(titleText, opts){
  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  t.textContent = titleText;

c.innerHTML = `
  <div class="qr-customer-like">
    <div id="qrReader" class="qr-camera"></div>

    <!-- âœ… ìˆ˜ê¸° ì‚¬ë²ˆ ì…ë ¥ (QR ì•ˆë  ë•Œ ëŒ€ë¹„) -->
    <div class="manual-row" style="margin-top:12px;">
      <input
        id="manualIdInput"
        type="number"
        inputmode="numeric"
        placeholder="ì‚¬ë²ˆ ì§ì ‘ ì…ë ¥"
      />
      <button class="primary-btn" onclick="manualSubmit()">í™•ì¸</button>
    </div>

    <div id="qrToast" class="qr-toast">QR ìŠ¤ìº” ëŒ€ê¸°ì¤‘</div>

    <div id="qrCounter" class="qr-counter">
  <div id="deviceCount">ì´ ë‹¨ë§ ì²˜ë¦¬ ì¸ì›: 0ëª…</div>
  <div id="totalCount">ì „ì²´ ëˆ„ì  ì¸ì›: 0ëª…</div>
</div>
  </div>
`;

  document.body.classList.add("qr-lock");
loadCountsOnEnter();  // âœ… ì¶”ê°€ (ì…ì¥ ì‹œ â‘ â‘¡ ì„¸íŒ…)
startQR();
}




/* =========================================================
   âœ… QR ì‹œì‘/ì¢…ë£Œ
========================================================= */
async function startQR(){
  if (qrScanner) return;

  try{
    // âœ… ì´ ì¤„ì€ ì ˆëŒ€ ì§€ìš°ì§€ ë§ˆ
    qrScanner = new Html5Qrcode("qrReader");

    // âœ… ì—¬ê¸°ì„œë§Œ ê¶Œí•œ ìš”ì²­ (1ë²ˆ)
  await qrScanner.start(
  { facingMode: "environment" },
  {
    fps: 30,                    // ì²´ê° ë™ì¼ / ì•ˆì •ì„± â†‘
    qrbox: { width: 220, height: 220 },
    disableFlip: true
  },
  decodedText => handleQR(decodedText),
  () => {}
);
  } catch(e){
    console.error(e);
    setQRResult("ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.", false);
  }
}
  
function cleanupQR(){
  document.body.classList.remove("qr-lock");
  qrMode = "";

  if (qrScanner){
    try{
      qrScanner.stop()
        .then(()=>{ qrScanner.clear(); qrScanner=null; })
        .catch(()=>{ try{ qrScanner.clear(); }catch{} qrScanner=null; });
    }catch{
      qrScanner=null;
    }
  }
}

/* =========================================================
   âœ… QR ì²˜ë¦¬
   - QR ë‚´ìš©: ...?eid=ì‚¬ë²ˆ í˜•íƒœë¥¼ ì „ì œë¡œ í•¨ (ë„ˆê°€ ë§í•œ êµ¬ì¡°)
   - ì—°ì† ìŠ¤ìº” ì¤‘ë³µ ë°©ì§€(debounce)
========================================================= */
function handleQR(text){
  if (scanLock) return; // ğŸ”’ ì´ë¯¸ ì¸ì‹ ì¤‘ì´ë©´ ë¬´ì‹œ

  const id = extractEid(text);
  if (!id) return;

  scanLock = true;      // ğŸ”¥ ì¦‰ì‹œ ì ê¸ˆ
   beep(); // ğŸ”Š ì—¬ê¸° ì¶”ê°€
  vibrate();   // ğŸ“³ ì§„ë™
  processEmployeeId(id);

  // ğŸ”“ 200ms í›„ ë‹¤ì‹œ ì¸ì‹ í—ˆìš© (ì²´ê° ìµœì ê°’)
  setTimeout(() => {
    scanLock = false;
  }, 200);
}


function processEmployeeId(id){
  const emp = findEmp(id);
  if (!emp){
    setQRResult("âŒ ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.", false);
    return;
  }

  const key = `${qrMode}|${emp.id}|${currentCategory}|${currentCourse}|${currentMealTitle}`;

// âœ… 1ì°¨: ê°™ì€ í™”ë©´ ì—°ì† ìŠ¤ìº” ë°©ì§€
if (key === lastScanKey){
  setQRResult(`âš ï¸ ${emp.name}(${emp.id}) ì´ë¯¸ ì²˜ë¦¬ë¨`, false);
  return;
}

// âœ… 2ì°¨: ë‚˜ê°”ë‹¤ ë“¤ì–´ì™€ë„ ì¤‘ë³µ ë°©ì§€
if (sessionScans[key]){
  setQRResult(`âš ï¸ ${emp.name}(${emp.id}) ì´ë¯¸ ê¸°ë¡ëœ í•­ëª©ì…ë‹ˆë‹¤`, false);
  return;
}

// ê¸°ë¡
lastScanKey = key;
sessionScans[key] = true;
sessionStorage.setItem("isc_scans", JSON.stringify(sessionScans));


// ğŸ”¥ ì¹´ìš´í„° í™”ë©´ ë°˜ì˜

  if (qrMode === "departure"){
    sendDeparture(emp);
    return;
  }

  if (qrMode === "meal"){
    sendMealApprove(emp);
    return;
  }

  if (qrMode === "customer"){
    cleanupQR();            // â— ê³ ê°ì¡°íšŒì—ì„œë§Œ
    showCustomerDetail(emp);
    return;
  }
}
    /* =========================================================
   âœ… qrì‹œ ì‚‘ì†Œë¦¬
========================================================= */
function beep(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();

    osc.type = "square";
    osc.frequency.value = 1200; // ì‚‘ ì†Œë¦¬ ë†’ì´
    gain.gain.value = 0.1;

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.start();
    osc.stop(ctx.currentTime + 0.08); // 0.08ì´ˆ

  }catch(e){}
}
  /* =========================================================
   âœ… qrì‹œ ì§„ë™
========================================================= */
  function vibrate(){
  if (navigator.vibrate){
    navigator.vibrate(40); // 40ms (QR ìŠ¤ìº”ìš© ìµœì )
  }
}

/* =========================================================
   âœ… GAS ì „ì†¡: ì¶œë°œ
========================================================= */
function sendDeparture(emp){
  const time = nowKSTString();

  setQRResult(
    `âœ… ${emp.name}(${emp.id}) ì¶œë°œ ì²´í¬ ì™„ë£Œ\n[${currentCategory}] ${currentCourse}\n${time}`,
    true
  );

  // ğŸ”¥ ë„¤íŠ¸ì›Œí¬ëŠ” ë‹¤ìŒ í‹±ìœ¼ë¡œ ë„˜ê¹€
  setTimeout(() => {
fetch(GAS_URL, {
  method: "POST",
  body: JSON.stringify({
    type: "departure",
    id: emp.id,
    name: emp.name,
    category: currentCategory,
    course: currentCourse,
    time
  })
})
.then(r => r.json())
.then(data => {
  const status = String(data?.status || "OK").toUpperCase();

  // âœ… ì „ì²´ ëˆ„ì ì€ ì„œë²„ ê°’ì´ ìµœìš°ì„ 
  if (data && data.totalCount != null) {
    const tc = document.getElementById("totalCount");
    if (tc) tc.textContent = `ì „ì²´ ëˆ„ì  ì¸ì›: ${Number(data.totalCount || 0)}ëª…`;
  }

  // âœ… ì¶œë°œì€ DUPLICATEë©´ ë‹¨ë§ê¸° ì¹´ìš´íŠ¸ ì¦ê°€ X
  if (status === "OK") {
    deviceCount++;
    sessionStorage.setItem(qrSessionKey, String(deviceCount));

    const dc = document.getElementById("deviceCount");
    if (dc) dc.textContent = `ì´ ë‹¨ë§ ì²˜ë¦¬ ì¸ì›: ${deviceCount}ëª…`;
  }
})
}


/* =========================================================
   âœ… GAS ì „ì†¡: ì¤‘ì‹ë¹„ ì§€ê¸‰(ìŠ¹ì¸)
   - ê³ ê°ìš©ê³¼ ì–‘ì‹ í†µì¼: type:"meal", action:"APPROVE", tour, time
========================================================= */
function sendMealApprove(emp){
  const time = nowKSTString();
  
  setQRResult(`âœ… ${emp.name}(${emp.id}) ì¤‘ì‹ë¹„ ì§€ê¸‰ ì™„ë£Œ\n[${currentMealTitle}]\n${time}`, true);
  
 // ğŸ”¥ ë„¤íŠ¸ì›Œí¬ëŠ” ë’¤ë¡œ
  setTimeout(() => {
 fetch(GAS_URL, {
  method:"POST",
  body: JSON.stringify({
    type: "meal",
    id: emp.id,
    name: emp.name,
    tour: currentMealTitle,
    action: "APPROVE",
    time
  })
})
.then(r => r.json())
.then(data => {
  const status = String(data?.status || "OK").toUpperCase();

  // âœ… ì¤‘ì‹ë¹„ëŠ” GASê°€ totalCountë¥¼ ì§€ê¸ˆ doPostì—ì„œ ì•ˆ ì£¼ê³  ìˆìŒ
  // ê·¸ë˜ì„œ "OK"ì¼ ë•Œë§Œ doGet ì¹´ìš´íŠ¸ë¡œ í•œ ë²ˆ ë” ê°±ì‹ (ì‹¤ì‹œê°„ ë³´ì¥)
  // (GAS êµ¬ì¡° ë³€ê²½ ì—†ì´ í”„ë¡ íŠ¸ì—ì„œ í•´ê²°)

  if (status === "OK") {
    deviceCount++;
    sessionStorage.setItem(qrSessionKey, String(deviceCount));

    const dc = document.getElementById("deviceCount");
    if (dc) dc.textContent = `ì´ ë‹¨ë§ ì²˜ë¦¬ ì¸ì›: ${deviceCount}ëª…`;

    // âœ… ì „ì²´ ëˆ„ì  ë‹¤ì‹œ ì¡°íšŒ
    fetch(`${GAS_URL}?mode=countMeal&tour=${encodeURIComponent(currentMealTitle)}`)
      .then(r => r.json())
      .then(d => {
        const tc = document.getElementById("totalCount");
        if (tc) tc.textContent = `ì „ì²´ ëˆ„ì  ì¸ì›: ${Number(d.totalCount || 0)}ëª…`;
      })
      .catch(console.error);
  }

  // âœ… NO_CHANGEë©´ ì¹´ìš´íŠ¸ ë³€í™” ì—†ìŒ (í‘œì‹œë§Œ ê²½ê³ ë¡œ ìœ ì§€í•˜ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸°ì„œ í† ìŠ¤íŠ¸ ì²˜ë¦¬ ê°€ëŠ¥)
})
}
/* =========================================================
   âœ… ê³ ê° ìƒì„¸ ì¶œë ¥ (ì—¬ê¸°ì„œë§Œ)
========================================================= */
function showCustomerDetail(emp){
   currentView = "customerDetail";
  document.querySelector(".side-menu").style.display = (window.innerWidth <= 767) ? "none" : "block";

  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  t.textContent = `ğŸ‘¤ ê³ ê° ìƒì„¸ - ${emp.name} (${emp.id})`;

  const kv = Object.keys(emp).map(k => {
    const v = (typeof emp[k] === "object") ? JSON.stringify(emp[k]) : String(emp[k]);
    return `
      <div class="info-row">
        <div class="info-label">${escapeHtml(k)}</div>
        <div>${escapeHtml(v)}</div>
      </div>
    `;
  }).join("");

  c.innerHTML = `
    <div class="info-card">
      <div style="margin-bottom:8px;">
        <span class="pill">employees.json ê¸°ë°˜</span>
        <span class="pill">ì‚¬ë²ˆ:${escapeHtml(String(emp.id))}</span>
      </div>
      <div class="info-grid">
        ${kv}
      </div>
    </div>

    <div class="info-card">
      <div style="margin-bottom:8px;">
        <span class="pill">ì°¸ê³ </span>
        <span class="pill">ê³ ê°ê´€ë¦¬ì—ì„œë§Œ ìƒì„¸ ì¶œë ¥</span>
      </div>
      <div style="color:#667085; font-size:13px;">
        ì—¬í–‰/ì¤‘ì‹ë¹„ ê´€ë¦¬ í™”ë©´ì€ â€œì—°ì† ìŠ¤ìº” ìë™ ê¸°ë¡â€ì´ ëª©ì ì´ë¼ ìƒì„¸ ì¶œë ¥ì€ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </div>
    </div>
  `;
}
  /* =========================================================
   âœ… ê´€ë¦¬ì ë¦¬í¬íŠ¸ í™”ë©´
========================================================= */
function openAdminReport(){
  const t = document.getElementById("detailTitle");
  const c = document.getElementById("detailContent");

  t.textContent = "ğŸ“Š ê´€ë¦¬ì ìš”ì•½ ë¦¬í¬íŠ¸";

  c.innerHTML = `
    <div class="card">
      <h3>ğŸ“ ì—¬í–‰ ì¶œë°œ ì¸ì›</h3>
      <div id="departureReport">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>

    <div class="card" style="margin-top:16px;">
      <h3>ğŸ± ì¤‘ì‹ë¹„ ì§€ê¸‰ ì¸ì›</h3>
      <div id="mealReport">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>
  `;

  loadAdminReport();
}
  /* =========================================================
   âœ… ë°ì´í„° ë¡œë”© í•¨ìˆ˜
========================================================= */
  function loadAdminReport(){
  fetch(`${GAS_URL}?mode=summary`)
    .then(r => r.json())
    .then(data => {
      renderReport("departureReport", data.departure);
      renderReport("mealReport", data.meal);
    })
    .catch(e => {
      document.getElementById("departureReport").textContent = "ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";
      document.getElementById("mealReport").textContent = "ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";
    });
}
/* =========================================================
   âœ… ë Œë”ë§ í•¨ìˆ˜
========================================================= */
  function renderReport(targetId, rows){
  const el = document.getElementById(targetId);
  if (!el || !rows) return;

  el.innerHTML = rows.map(r =>
    `<div>â€¢ ${r.title} : <b>${r.count}ëª…</b></div>`
  ).join("");
}
/* =========================================================
   âœ… ë’¤ë¡œê°€ê¸°
========================================================= */
function goBack(){
  cleanupQR();

  switch (currentView){

    case "travelQR":
      openTravelList(currentCategory);
      break;

    case "travelList":
      openPage("travelRoot", true);
      break;

    case "mealQR":
      openPage("mealRoot", true);
      break;

    case "customer":
    case "report":
      openHome();
      break;
      
      case "customerDetail":
  openCustomerScan();
  break;

    default:
      openHome();
  }
}

/* =========================================================
   âœ… ê²°ê³¼ ì´ˆê¸°í™”
========================================================= */
function resetResult(){
  setQRResult("QR ìŠ¤ìº” ëŒ€ê¸°ì¤‘", true);
  lastScanKey = "";
}

/* =========================================================
   âœ… ê²°ê³¼ í‘œì‹œ
========================================================= */
function setQRResult(msg, ok){
  const el = document.getElementById("qrToast");
  if (!el) return;

  el.textContent = msg;
  el.className = "qr-toast " + (ok ? "success" : "fail");
}

/* =========================================================
   âœ… ìœ í‹¸
========================================================= */
function extractEid(text){
  // eid=xxxxx ë§Œ ì°¾ìœ¼ë©´ ë¨
  const m = text.match(/[?&]eid=([^&]+)/);
  return m ? m[1] : null;
}

function findEmp(id){
  return employees.find(e => String(e.id).trim() === String(id).trim()) || null;
}

function nowKSTString(){
  return new Intl.DateTimeFormat("ko-KR", {
    timeZone: "Asia/Seoul",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit"
  }).format(new Date());
}

function escapeQuotes(str){
  return String(str).replace(/'/g, "\\'").replace(/"/g, '\\"');
}

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}
function exitQR(){
  cleanupQR();
  goBack(); // ê¸°ì¡´ íˆìŠ¤í† ë¦¬ ê¸°ë°˜ ì´ë™ ê·¸ëŒ€ë¡œ ì‚¬ìš©
}
function manualSubmit(){
  const input = document.getElementById("manualIdInput");
  if (!input) return;

  const id = input.value.trim();
  if (!id) return;

  // ğŸ”¥ QRê³¼ ì™„ì „íˆ ë™ì¼í•œ ì²˜ë¦¬ íë¦„
  processEmployeeId(id);

  input.value = "";
}
  function buildQrSessionKey(){
  // QR ëª¨ë“œ + ì»¨í…ìŠ¤íŠ¸ë¡œ â€œí•´ë‹¹ í™”ë©´ ë‹¨ìœ„â€ ì¹´ìš´íŠ¸ ìœ ì§€
  return `isc_device_count|${qrMode}|${currentCategory}|${currentCourse}|${currentMealTitle}`;
}

function loadCountsOnEnter(){
  // â‘  ë‹¨ë§ê¸° ì¹´ìš´íŠ¸(ì„¸ì…˜)
  qrSessionKey = buildQrSessionKey();
  deviceCount = Number(sessionStorage.getItem(qrSessionKey) || "0") || 0;

  const dc = document.getElementById("deviceCount");
  if (dc) dc.textContent = `ì´ ë‹¨ë§ ì²˜ë¦¬ ì¸ì›: ${deviceCount}ëª…`;

  // â‘¡ ì „ì²´ ëˆ„ì (ì‹œíŠ¸) - ëª¨ë“œë³„ ì¹´ìš´íŠ¸ ì¡°íšŒ
  if (qrMode === "departure"){
    fetch(`${GAS_URL}?mode=countDeparture&category=${encodeURIComponent(currentCategory)}&course=${encodeURIComponent(currentCourse)}`)
      .then(r => r.json())
      .then(d => {
        const tc = document.getElementById("totalCount");
        if (tc) tc.textContent = `ì „ì²´ ëˆ„ì  ì¸ì›: ${Number(d.totalCount || 0)}ëª…`;
      })
      .catch(console.error);
  }

  if (qrMode === "meal"){
    fetch(`${GAS_URL}?mode=countMeal&tour=${encodeURIComponent(currentMealTitle)}`)
      .then(r => r.json())
      .then(d => {
        const tc = document.getElementById("totalCount");
        if (tc) tc.textContent = `ì „ì²´ ëˆ„ì  ì¸ì›: ${Number(d.totalCount || 0)}ëª…`;
      })
      .catch(console.error);
  }
}

/* =========================================================
   âœ… ì—”í„°ë¡œ ë¡œê·¸ì¸
========================================================= */
document.addEventListener("keydown", (e) => {
  const loginVisible =
    document.getElementById("adminLoginSection").offsetParent !== null;

  if (e.key === "Enter" && loginVisible) {
    adminDoLogin();
  }
});
/* =========================================================
   âœ… (ì›ë³¸) ì—¬í–‰ ì¼ì • ë°ì´í„°: ë„¤ê°€ ì¤€ ê·¸ëŒ€ë¡œ ìœ ì§€
========================================================= */
const travelSchedule = [
  {
    day: "DAY 1",
    date: "2026.03.11 (ìˆ˜)",
    title: "ì¸ì²œ â†’ íƒ€ì´ë² ì´ / ì‹œë‚´ í•˜ì´ë¼ì´íŠ¸",
    items: [
      { time:"08:00/9:00", icon:"âœˆï¸", title:"ì¸ì²œ êµ­ì œê³µí•­ ì¶œë°œ", desc:"OZ 711 / KE 2021" },
      { time:"12:30/13:30", icon:"ğŸœ", title:"ì¤‘ì‹ | ìš°ìœ¡ë©´", desc:"í˜„ì§€ ì¸ê¸° ì¤‘ì‹ë‹¹" },
      { time:"13:30/14:30", icon:"ğŸ›ï¸", title:"ë‹¨ìˆ˜ì´ ì˜›ê±°ë¦¬/í™ë§ˆì˜¤ì²­/ì§„ë¦¬ëŒ€í•™", desc:"í™ë§ˆì˜¤ì²­Â·ì˜›ê±°ë¦¬ ê´€ê´‘" },
      { time:"16:30/17:30", icon:"ğŸ¨", title:"í˜¸í…” ì²´í¬ì¸", desc:"íƒ€ì´ë² ì´ ë©”ë¦¬ì–´íŠ¸ í˜¸í…”[5ì„±ê¸‰]" },
      { time:"18:00/18:30", icon:"ğŸ½ï¸", title:"ì„ì‹ | íƒ€ì¹´ì˜¤ ìƒ¤ë¸Œìƒ¤ë¸Œ", desc:"ë¬´ì œí•œ ìƒ¤ë¸Œìƒ¤ë¸Œ" },
      { time:"19:00/19:30", icon:"ğŸŒƒ", title:"íƒ€ì´ë² ì´ 101 ì „ë§ëŒ€", desc:"ì•¼ê²½ ê´€ëŒ" },
      { time:"21:30", icon:"ğŸ¨", title:"í˜¸í…” ë³µê·€", desc:"íƒ€ì´ë² ì´ ë©”ë¦¬ì–´íŠ¸ í˜¸í…”[5ì„±ê¸‰]" }
    ]
  },
  {
    day: "DAY 2",
    date: "2026.03.12 (ëª©)",
    title: "ì„ íƒ ê´€ê´‘ / ë§Œì°¬",
    items: [
      { time:"08:30/9:00", icon:"ğŸšŒ", title:"ì„ íƒ ê´€ê´‘", desc:"ê°œì¸ ì„ íƒ ì¼ì •" },
      { time:"18:00", icon:"ğŸ‰", title:"ISC ë§Œì°¬", desc:"í•„ìˆ˜ ì°¸ì„" }
    ]
  },
  {
    day: "DAY 3",
    date: "2026.03.13 (ê¸ˆ)",
    title: "ê·¼êµ ê´€ê´‘",
    items: [
       { time:"10:00", icon:"ğŸ¨ğŸ½ï¸", title:"í˜¸í…” ì¡°ì‹ í›„ ì¶œë°œ", desc:"íƒ€ì´ë² ì´ ë©”ë¦¬ì–´íŠ¸ í˜¸í…”[5ì„±ê¸‰]" },
      { time:"11:00", icon:"ğŸŒŠ", title:"ì˜ˆë¥˜ ì§€ì§ˆê³µì›", desc:"ê¸°ì•”ê´´ì„ ê´€ê´‘" },
      { time:"12:30", icon:"ğŸ¦", title:"ì¤‘ì‹ : ì”¨í‘¸ë“œ", desc:"í˜„ì§€ í•´ì‚°ë¬¼ íŠ¹ì‹" },
      { time:"14:30", icon:"ğŸ®", title:"ìŠ¤í€ ì²œë“±ë‚ ë¦¬ê¸°", desc:"ì†Œì›ì²œë“± ë‚ ë¦¬ê¸°" },
      { time:"17:00", icon:"ğŸ®", title:"ì§€ìš°í€ ì•¼ê²½", desc:"í™ë“± ë§ˆì„" },
      { time:"20:00", icon:"ğŸŒŠ", title:"ì•¼ì‹œì¥ ë° ì„ì‹", desc:"ì•¼ì‹œì¥ ììœ ì‹ ë° ì‡¼í•‘" },
      { time:"21:30", icon:"ğŸ¨", title:"í˜¸í…”ë³µê·€", desc:"íƒ€ì´ë² ì´ ë©”ë¦¬ì–´íŠ¸ í˜¸í…”[5ì„±ê¸‰]" },
      { time:"ì „ì¼", icon:"ğŸ§­", title:"ììœ ì¼ì • ì„ íƒì‹œ", desc:"ì „ì²´ ê°œì¸ë¶€ë‹´(ì¤‘ì‹ë¹„ ì§€ê¸‰ X)" }
    ]
  },
  {
    day: "DAY 4",
    date: "2026.03.14 (í† )",
    title: "ê·€êµ­",
    items: [
      { time:"08:00/9:00", icon:"ğŸ¨", title:"í˜¸í…” ì²´í¬ì•„ì›ƒ", desc:"íƒ€ì´ë² ì´ ë©”ë¦¬ì–´íŠ¸ í˜¸í…”[5ì„±ê¸‰]" },
      { time:"11:40/12:25", icon:"âœˆï¸", title:"íƒ€ì´ë² ì´ ì¶œë°œ", desc:"OZ 712 / KE 2022" },
      { time:"15:25/15:50", icon:"ğŸ‡°ğŸ‡·", title:"ì¸ì²œ ë„ì°©", desc:"ISC In Taiwan" }
    ]
  }
];
/* =========================================================
   âœ… ì¤‘ì‹ë¹„ ì§€ê¸‰ í•­ëª© (ì—¬ê¸°ë§Œ ë„¤ ê³ ê°ìš© í•­ëª©ëª…ê³¼ â€œê°™ê²Œâ€ ë§ì¶°ì£¼ë©´
      ê³ ê°ìš© í˜ì´ì§€ì—ì„œ ì§€ê¸‰í‘œì‹œ ë™ê¸°í™”ê°€ ì‰¬ì›€)
   - ì§€ê¸ˆì€ ì˜ˆì‹œ 2ê°œ ë„£ì–´ë‘ 
   - ë„¤ ê³ ê°ìš©ì—ì„œ ì“°ëŠ” â€œë‹¨ìˆ˜ì´â€ í•­ëª©ëª…ì„ ê·¸ëŒ€ë¡œ ì˜®ê²¨ ì ì–´ì£¼ë©´ ë¨
========================================================= */
const MEAL_ITEMS = [
  { title: "ììœ ì¼ì •" },
  { title: "ê¸°íƒ€ ì¤‘ì‹ë¹„" }
];

/* =========================================================
   âœ… ìµœì´ˆ ì§„ì…: ë¡œê·¸ì¸ ì „ì—” ì•„ë¬´ê²ƒë„ ì•ˆ ë³´ì´ê²Œ
========================================================= */
</script>

</body>
</html>
